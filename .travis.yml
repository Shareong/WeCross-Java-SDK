# safelist
branches:
    only:
        - /.*/
matrix:
    fast_finish: true
    include:
        -   language: python
            python: 3.6
            dist: xenial
            before_cache:
            cache:
            before_install:
            script: |
                bash .ci/ci_check_commit.sh

        -   language: java
            jdk: openjdk8
            os: linux
            dist: xenial
            sudo: required

        -   language: java
            jdk: openjdk9
            os: linux
            dist: xenial
            sudo: required

        -   language: java
            jdk: openjdk10
            os: linux
            dist: xenial
            sudo: required

        -   language: java
            jdk: openjdk11
            os: linux
            dist: xenial
            sudo: required

        # - language: java
        #   jdk: openjdk11
        #   os: osx
        #   before_install:
        #     - brew install gradle && gradle wrapper

before_cache:
    - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
    - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
    directories:
        - $HOME/.gradle/caches/
        - $HOME/.gradle/wrapper/
before_install:
    - gradle wrapper

addons:
    sonarcloud:
        organization: "shareong"
        token:
            secure: "r6bx+eZbP9oznk3lRi2RuqlOQK/yW2ULnPZbXomKWkvcak1c1uqJUj17aY3Z5BIeVdd8YvSQvUG7PTtHVUuI9KM9ckncTer7FP591zPo2LjHAobqj6Kj9V9hs1mW34mxdkNNXDVbSapPr0WooOpskcKgqt8bM3xyJjvIyAYCQBBSsNBYzxU86XjYsKnuxlB8L3yzCyi/YTd0z2au4+CBxX0EJf8sHJgvYRIOCs50tmguaPM+M3MHkz5pDGLL1lipcZcA32ooUDQsXnjcycWbwTpGry2ZU0n4bQp9Pthd1+aHum8nOaRKMgxfw/aSSbycePCiRQavMhwN8y/U1i3GOmfcoc/XSV2GrN57Otlce12NugWozBV8zNUslS1OZ4MezMhgqiFiwht0/HQtNQnYzSZvPrK8ZetQKpSFfCIUGDw3UN7P6YTFdjT1OrOdjFNSOnhqi8YUd5ORPlx926ZnO4tqa+EpbR1hiPGpeD4TbhbvgPgTu1GFhCwTUbrAmjRvHLYX/KM0kmWvxotFvVV+XM7LYgkCBQPZXC5rY/ftj6N0zS6pWpFcZHUNOEWIFdF5uReNrEUzxZWl1RAxjtzGmJGCrSKmEYaN/s2Ur4lPI2y/cYm6aQZqEn/vDvNPb3kKFalnI+ussV5iLWvBDDsGzaOKC+l9SaorIVuYCA10fOk="

script: |
    sonar-scanner && bash .ci/ci_check.sh


after_success:
    - bash <(curl -s https://codecov.io/bash)